{"version":3,"sources":["../../src/pages/signup/signup.module.ts","../../src/pages/signup/signup.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { Signup } from './signup';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    Signup,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(Signup),\r\n  ],\r\n  exports: [\r\n    Signup\r\n  ]\r\n})\r\nexport class SignupModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, AlertController } from 'ionic-angular';\r\nimport * as WC from 'woocommerce-api';\r\nimport { WoocommerceProvider } from '../../providers/woocommerce/woocommerce';\r\n\r\n@IonicPage({})\r\n@Component({\r\n  selector: 'page-signup',\r\n  templateUrl: 'signup.html',\r\n})\r\nexport class Signup {\r\n\r\n\r\n  newUser: any = {};\r\n  billing_shipping_same: boolean;\r\n  WooCommerce: any;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public toastCtrl: ToastController, public alertCtrl: AlertController, private WP: WoocommerceProvider) {\r\n\r\n    this.newUser.billing_address = {};\r\n    this.newUser.shipping_address = {};\r\n    this.billing_shipping_same = false; \r\n\r\n    //this.newUser.billing_address.country = \"India\"\r\n\r\n    this.WooCommerce = WP.init();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad Signup');\r\n  }\r\n\r\n  setBillingToShipping(){\r\n    this.billing_shipping_same = !this.billing_shipping_same;\r\n  }\r\n\r\n  checkEmail(){\r\n\r\n    let validEmail = false;\r\n\r\n    let reg = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\n    if(reg.test(this.newUser.email)){\r\n      //email looks valid\r\n\r\n      this.WooCommerce.getAsync('customers/email/' + this.newUser.email).then( (data) => {\r\n        let res = (JSON.parse(data.body));\r\n\r\n        if(res.errors){\r\n          validEmail = true;\r\n\r\n          this.toastCtrl.create({\r\n            message: \"Congratulations. Email is good to go.\",\r\n            duration: 3000\r\n          }).present();\r\n\r\n        } else {\r\n          validEmail = false;\r\n\r\n          this.toastCtrl.create({\r\n            message: \"Email already registered. Please check.\",\r\n            showCloseButton: true\r\n          }).present();\r\n        }\r\n\r\n        console.log(validEmail);\r\n\r\n      })\r\n\r\n\r\n\r\n    } else {\r\n      validEmail = false;\r\n      this.toastCtrl.create({\r\n        message: \"Invalid Email. Please check.\",\r\n        showCloseButton: true\r\n      }).present();\r\n      console.log(validEmail);\r\n    }\r\n\r\n  }\r\n\r\n  signup(){\r\n\r\n      let customerData = {\r\n        customer : {}\r\n      }\r\n\r\n      customerData.customer = {\r\n        \"email\": this.newUser.email,\r\n        \"first_name\": this.newUser.first_name,\r\n        \"last_name\": this.newUser.last_name,\r\n        \"username\": this.newUser.username,\r\n        \"password\": this.newUser.password,\r\n        \"billing_address\": {\r\n          \"first_name\": this.newUser.first_name,\r\n          \"last_name\": this.newUser.last_name,\r\n          \"company\": \"\",\r\n          \"address_1\": this.newUser.billing_address.address_1,\r\n          \"address_2\": this.newUser.billing_address.address_2,\r\n          \"city\": this.newUser.billing_address.city,\r\n          \"state\": this.newUser.billing_address.state,\r\n          \"postcode\": this.newUser.billing_address.postcode,\r\n          \"country\": this.newUser.billing_address.country,\r\n          \"email\": this.newUser.email,\r\n          \"phone\": this.newUser.billing_address.phone\r\n        },\r\n        \"shipping_address\": {\r\n          \"first_name\": this.newUser.first_name,\r\n          \"last_name\": this.newUser.last_name,\r\n          \"company\": \"\",\r\n          \"address_1\": this.newUser.shipping_address.address_1,\r\n          \"address_2\": this.newUser.shipping_address.address_2,\r\n          \"city\": this.newUser.shipping_address.city,\r\n          \"state\": this.newUser.shipping_address.state,\r\n          \"postcode\": this.newUser.shipping_address.postcode,\r\n          \"country\": this.newUser.shipping_address.country\r\n        }\r\n      }\r\n\r\n      if(this.billing_shipping_same){\r\n        this.newUser.shipping_address = this.newUser.shipping_address;\r\n      }\r\n\r\n      this.WooCommerce.postAsync('customers', customerData).then( (data) => {\r\n\r\n        let response = (JSON.parse(data.body));\r\n\r\n        if(response.customer){\r\n          this.alertCtrl.create({\r\n            title: \"Account Created\",\r\n            message: \"Your account has been created successfully! Please login to proceed.\",\r\n            buttons: [{\r\n              text: \"Login\",\r\n              handler: ()=> {\r\n                //TODO\r\n              }\r\n            }]\r\n          }).present();\r\n        } else if(response.errors){\r\n          this.toastCtrl.create({\r\n            message: response.errors[0].message,\r\n            showCloseButton: true\r\n          }).present();\r\n        }\r\n\r\n      })\r\n\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts"],"sourceRoot":""}